<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>index</title>

  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>▢</text></svg>">
  <link rel="stylesheet" href="/styles.css?v=42" />
</head>

<body>
  <!-- ====== GLASS LAYER ====== -->
  <div id="glassFX" aria-hidden="true"></div>

  <!-- ====== CRACKS LAYER ====== -->
  <svg id="cracks" viewBox="0 0 1000 1000" preserveAspectRatio="none" aria-hidden="true"></svg>

  <main id="wrap">
    <header class="card">
      <h1>Welcome</h1>
      <p id="system">
        This page is currently under revision.<br><br>
        Some content may be incomplete or displayed incorrectly.
        If you believe you’ve reached this page in error, you may close it at any time.
      </p>

      <div class="topRow">
        <input id="viewerToken" placeholder="viewer token" autocomplete="off" spellcheck="false" />
        <div class="pill" id="timestamp">timestamp: —</div>
        <div class="pill" id="build">build: revision</div>
      </div>
    </header>

    <section class="grid card" aria-label="media">
      <img class="adImg" alt="">
      <img class="adImg" alt="">
      <img class="adImg" alt="">
      <img class="adImg" alt="">
      <img class="adImg" alt="">
      <img class="adImg" alt="">
    </section>

    <section class="card" aria-label="controls">
      <div class="btnRow">
        <button class="sim-btn" id="launchBtn">launch campaign</button>
        <div class="pill" id="launchStatus">Notice: this endpoint is not intended for external access.</div>
      </div>

      <div class="smallNote">
        functionality may be incomplete. do not rely on output. if something looks wrong, report it.
      </div>

      <div class="btnRow">
        <button class="sim-btn" disabled>report issue</button>
        <button class="sim-btn" disabled>billing</button>
        <button class="sim-btn" disabled>assets</button>
        <button class="sim-btn" disabled>export</button>
      </div>
    </section>
  </main>

  <!-- ====== SUBTITLES ====== -->
  <section id="subs" class="hidden" aria-hidden="true">
    <div id="subsName"></div>
    <div id="subsText"></div>
  </section>

  <!-- ====== SIM ROOM ====== -->
  <section id="simRoom" class="hidden" aria-hidden="true">
    <div class="card simCard">
      <div class="pill" style="margin-bottom:10px;">simulation</div>
      <pre id="simText" class="simText" aria-live="polite"></pre>

      <div id="simChoices" class="hidden simChoices">
        <button class="sim-btn" id="choiceNeed">…</button>
        <button class="sim-btn" id="choiceLie">…</button>
        <button class="sim-btn" id="choiceRun">…</button>
      </div>
    </div>
  </section>

  <!-- ====== TASK UI ====== -->
  <section id="taskUI" class="hidden" aria-hidden="true">
    <div class="card taskCard">
      <div class="pill" id="taskTitle">TASK</div>
      <div class="taskDesc" id="taskDesc">—</div>
      <div id="taskBody" class="taskBody"></div>

      <div id="taskActions" class="taskActions">
        <button class="sim-btn" id="taskPrimary">continue</button>
        <button class="sim-btn hidden" id="taskSecondary">secondary</button>
      </div>
    </div>
  </section>

  <!-- ====== RESET OVERLAY ====== -->
  <section id="resetOverlay" class="hidden" aria-hidden="true">
    <div class="card resetCard">
      <div class="pill" id="resetTitle">RESET</div>
      <pre id="resetBody" class="resetBody"></pre>
    </div>
  </section>

  <!-- ====== FINAL MODAL ====== -->
  <section id="finalOverlay" class="hidden" aria-hidden="true">
    <div class="card finalCard">
      <div class="pill">verification</div>
      <p class="smallNote" style="margin-top:10px;">
        Notice: this endpoint is not intended for external access.<br>
        Functionality may be incomplete.
      </p>

      <input id="finalDiscord" placeholder="discord username" autocomplete="off" spellcheck="false" class="textIn" />
      <div id="turnstileBox" style="margin-top:12px;"></div>
      <div id="finalErr" class="errText"></div>

      <div class="taskActions" style="margin-top:14px;">
        <button class="sim-btn" id="finalCancel">cancel</button>
        <button class="sim-btn" id="finalVerify">verify</button>
      </div>
    </div>
  </section>

  <!-- ====== HACK ROOM ====== -->
  <section id="hackRoom" class="hidden" aria-hidden="true">
    <div class="hackTop">
      <div class="pill" id="hackUser">USER: —</div>

      <div class="hackFiles">
        <button class="hack-filebtn" data-file="0">boot.log</button>
        <button class="hack-filebtn" data-file="1">profile.cfg</button>
        <button class="hack-filebtn" data-file="2">cache.tmp</button>
      </div>

      <div class="pill" id="hackFilename">—</div>
    </div>

    <div class="hackMeta">
      <div class="pill">targets<span id="hackTargets"></span></div>
      <div class="pill" id="hackStatus">—</div>
    </div>

    <div id="hackLines"></div>

    <div class="hackActions">
      <button class="sim-btn" id="hackDelete">delete selected</button>
      <button class="sim-btn" id="hackReset">reset</button>
    </div>
  </section>

  <!-- ====== ADMIN PANEL (draggable via main.js handle: .adminHead) ====== -->
  <section id="adminPanel" class="hidden" aria-hidden="true">
    <div class="adminBox">
      <div class="adminHead">
        <div class="pill">admin</div>
        <button class="sim-btn" id="adminToggle">hide</button>
      </div>

      <div class="adminBody">
        task: <span id="adminTask">—</span><br>
        hint: <span id="adminAnswer">—</span>
      </div>

      <div class="adminBtns">
        <button class="sim-btn" id="adminSkip">skip</button>
      </div>
    </div>
  </section>

  <!-- OPTIONAL placeholders (safe) -->
  <div id="viewerFake" class="hidden"></div>
  <div id="viewerState" class="hidden"></div>

  <!-- Cloudflare Turnstile -->
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <!-- Load order matters -->
  <script src="/dialogue.js?v=42"></script>
  <script src="/tasks.js?v=42"></script>

  <script src="/packs/pack1.js?v=42"></script>
  <script src="/packs/pack2.js?v=42"></script>
  <script src="/packs/pack3.js?v=42"></script>
  <script src="/packs/pack4.js?v=42"></script>
  <script src="/packs/pack5.js?v=42"></script>

  <script src="/audio_player.js?v=42"></script>
  <script src="/main.js?v=42"></script>

  <!-- timestamp updater -->
  <script>
    (function () {
      const el = document.getElementById("timestamp");
      if (!el) return;
      function tick() {
        const d = new Date();
        el.textContent = "timestamp: " + d.toLocaleString();
      }
      tick();
      setInterval(tick, 1000);
    })();
  </script>
</body>
</html>
